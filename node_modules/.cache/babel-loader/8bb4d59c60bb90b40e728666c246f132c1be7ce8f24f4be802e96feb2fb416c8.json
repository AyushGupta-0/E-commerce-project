{"ast":null,"code":"var _jsxFileName = \"/workspaces/E-commerce-project/src/Components/Login/AuthForm.js\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useContext } from 'react';\nimport AuthContext from '../../store/auth-context';\nimport { useHistory } from 'react-router-dom';\nimport classes from './AuthForm.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthForm = () => {\n  _s();\n  const history = useHistory();\n  const emailref = useRef();\n  const pasref = useRef();\n  const authctx = useContext(AuthContext);\n  const [isLogin, setIsLogin] = useState(false);\n  const [Isloading, setIsloading] = useState(false);\n  const switchAuthModeHandler = () => {\n    setIsLogin(prevState => !prevState);\n  };\n  const submithandler = async event => {\n    event.preventDefault();\n    const email = emailref.current.value;\n    const pass = pasref.current.value;\n    setIsloading(true);\n    if (isLogin) {\n      const respose = await fetch(\"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAh0bxb01JiTtQGyO_WjLV8nlXeTfsdN04\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          email: email,\n          password: pass,\n          returnSecureToken: true\n        }),\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      });\n      const data = await respose.json();\n      if (data.idToken !== undefined) {\n        localStorage.setItem('id', data.idToken);\n        localStorage.setItem('email', email);\n      }\n      authctx.login(localStorage.getItem('id'));\n      if (localStorage.getItem('id')) {\n        history.replace('/store');\n      }\n      if (!respose.ok) {\n        alert(data.error.message);\n        history.replace('/auth');\n      }\n    } else {\n      const respose = await fetch(\"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAh0bxb01JiTtQGyO_WjLV8nlXeTfsdN04\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          email: email,\n          password: pass,\n          returnSecureToken: true\n        }),\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      });\n      if (!respose.ok) {\n        const data = await respose.json();\n        alert(data.error.message);\n      }\n    }\n\n    //--------------------------------------SET TIME OUT -------------------------------------------------------->\n    setIsloading(false);\n    const logout = () => {\n      authctx.logout();\n      history.replace('/auth');\n    };\n    setTimeout(() => {\n      logout();\n    }, 300000);\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: classes.auth,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: isLogin ? 'Login' : 'Sign Up'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Your Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          required: true,\n          ref: emailref\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Your Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          required: true,\n          ref: pasref\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: [!Isloading && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: submithandler,\n          children: isLogin ? 'Login' : 'Sign Up'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 23\n        }, this), Isloading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Sending Request...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: classes.toggle,\n          onClick: switchAuthModeHandler,\n          children: isLogin ? 'Create new account' : 'Login with existing account'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthForm, \"HsnI8LVuk7PeUGbWEy4k3vuqEcE=\", false, function () {\n  return [useHistory];\n});\n_c = AuthForm;\nexport default AuthForm;\nvar _c;\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"names":["useState","useRef","useContext","AuthContext","useHistory","classes","jsxDEV","_jsxDEV","AuthForm","_s","history","emailref","pasref","authctx","isLogin","setIsLogin","Isloading","setIsloading","switchAuthModeHandler","prevState","submithandler","event","preventDefault","email","current","value","pass","respose","fetch","method","body","JSON","stringify","password","returnSecureToken","headers","data","json","idToken","undefined","localStorage","setItem","login","getItem","replace","ok","alert","error","message","logout","setTimeout","className","auth","children","fileName","_jsxFileName","lineNumber","columnNumber","control","htmlFor","type","id","required","ref","actions","onClick","toggle","_c","$RefreshReg$"],"sources":["/workspaces/E-commerce-project/src/Components/Login/AuthForm.js"],"sourcesContent":["import { useState, useRef, useContext} from 'react';\nimport AuthContext from '../../store/auth-context';\nimport { useHistory } from 'react-router-dom';\n\n\n\nimport classes from './AuthForm.module.css';\n\nconst AuthForm = () => {\n\n \n \n  const history=useHistory();\n  const emailref=useRef();\n  const pasref=useRef();\n  const authctx=useContext(AuthContext);\n\n  const [isLogin, setIsLogin] = useState(false);\n  const [Isloading, setIsloading] = useState(false);\n\n\n  const switchAuthModeHandler = () => {\n\n    setIsLogin((prevState) => !prevState);\n  };\n\n\n  const submithandler=async (event)=>{\n    event.preventDefault();\n    const email=emailref.current.value;\n    const pass=pasref.current.value;\n  \n    setIsloading(true);\n    if(isLogin){\n      const respose = await fetch(\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAh0bxb01JiTtQGyO_WjLV8nlXeTfsdN04\",\n        {\n          method: \"POST\",\n          body: JSON.stringify({\n            email:email,\n            password:pass,\n            returnSecureToken:true\n          }),\n          headers: {\n            \"Content-type\": \"application/json\",\n          },\n        }\n        );\n        const data = await respose.json();\n        if(data.idToken!==undefined){\n        localStorage.setItem('id', data.idToken);\n        localStorage.setItem('email', email);\n        }\n        authctx.login(localStorage.getItem('id'));\n        if(localStorage.getItem('id')){\n        history.replace('/store');\n        }\n        if(!respose.ok)\n        {\n         \n         \n          alert(data.error.message);\n          history.replace('/auth');\n\n            \n\n        }\n        \n\n    }\n    else{\n      const respose = await fetch(\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAh0bxb01JiTtQGyO_WjLV8nlXeTfsdN04\",\n        {\n          method: \"POST\",\n          body: JSON.stringify({\n            email:email,\n            password:pass,\n            returnSecureToken:true\n          }),\n          headers: {\n            \"Content-type\": \"application/json\",\n          },\n        }\n        );\n        if(!respose.ok)\n        {\n         \n          const data = await respose.json();\n          alert(data.error.message);\n            \n\n        }\n      \n    }\n\n    //--------------------------------------SET TIME OUT -------------------------------------------------------->\n    setIsloading(false);\n    const logout=()=>{\n      authctx.logout();\n      history.replace('/auth')\n     \n           \n    }\n    setTimeout(()=>{\n      logout();\n   \n    },300000);\n    \n  \n  }\n \n\n  return (\n    <section className={classes.auth}>\n      <h1>{isLogin ? 'Login' : 'Sign Up'}</h1>\n      <form >\n        <div className={classes.control}>\n          <label htmlFor='email'>Your Email</label>\n          <input type='email' id='email' required ref={emailref}/>\n        </div>\n        <div className={classes.control}>\n          <label htmlFor='password'>Your Password</label>\n          <input\n            type='password'\n            id='password'\n            required\n            ref={pasref}\n          />\n        </div>\n        \n       <div className={classes.actions}>\n         {!Isloading&&<button onClick={submithandler}>{isLogin ? 'Login' : 'Sign Up'}</button>}\n          {Isloading&&<p>Sending Request...</p>}\n         \n          <button\n            type='button'\n            className={classes.toggle}\n            onClick={switchAuthModeHandler}\n          >\n            {isLogin ? 'Create new account' : 'Login with existing account'}\n          </button>\n        </div>\n      </form>\n     \n    </section>\n  );\n\n};\n\nexport default AuthForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}